const express = require('express');const authMiddleware = require('../middleware/authMiddleware');const store = require('../store/memoryStore');const router = express.Router();router.get('/', authMiddleware, (req, res) => {  const userProjects = store.getProjects().filter(p => p.userId === req.user.id);  res.json(userProjects);});router.post('/', authMiddleware, (req, res) => {  const { name, movies } = req.body;  if (!name || !movies || !Array.isArray(movies)) {    return res.status(400).json({ message: 'Project name and a list of movies are required.' });  }  const newProject = {    id: store.getProjects().length + 1,    userId: req.user.id,    name,    movies,    createdAt: new Date()  };  store.addProject(newProject);  res.status(201).json(newProject);});router.get('/:id', authMiddleware, (req, res) => {  const projectId = parseInt(req.params.id, 10);  const project = store.findProject(p => p.id === projectId && p.userId === req.user.id);  if (!project) {    return res.status(404).json({ message: 'Project not found or you do not have access.' });  }  res.json(project);});router.put('/:id', authMiddleware, (req, res) => {  const projectId = parseInt(req.params.id, 10);  const { name, movies } = req.body;  const projectIndex = store.findProjectIndex(p => p.id === projectId && p.userId === req.user.id);  if (projectIndex === -1) {    return res.status(404).json({ message: 'Project not found or you do not have access.' });  }  const updatedProject = store.updateProject(projectIndex, { name, movies });  res.json(updatedProject);});router.delete('/:id', authMiddleware, (req, res) => {  const projectId = parseInt(req.params.id, 10);  const wasDeleted = store.deleteProject(p => p.id !== projectId || p.userId !== req.user.id);  if (!wasDeleted) {    return res.status(404).json({ message: 'Project not found or you do not have access.' });  }  res.status(204).send();});module.exports = router;