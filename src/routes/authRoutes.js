const express = require('express');const jwt = require('jsonwebtoken');const config = require('../config');const { getUsers, addUser, findUser } = require('../store/memoryStore');const router = express.Router();router.post('/register', async (req, res) => {  const { username, password } = req.body;  if (findUser(u => u.username === username)) {    return res.status(400).json({ message: 'User already exists' });  }  const newUser = { id: getUsers().length + 1, username, password };  addUser(newUser);  const payload = { user: { id: newUser.id, username: newUser.username } };  jwt.sign(payload, config.JWT_SECRET, { expiresIn: '1h' }, (err, token) => {    if (err) throw err;    res.json({ token, user: { id: newUser.id, username: newUser.username } });  });});router.post('/login', async (req, res) => {  const { username, password } = req.body;  const user = findUser(u => u.username === username);  if (!user || user.password !== password) {    return res.status(400).json({ message: 'Invalid Credentials' });  }  const payload = { user: { id: user.id, username: user.username } };  jwt.sign(payload, config.JWT_SECRET, { expiresIn: '1h' }, (err, token) => {    if (err) throw err;    res.json({ token, user: { id: user.id, username: user.username } });  });});module.exports = router;